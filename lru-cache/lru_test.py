import unittest
import lru

class TestLRUTestCase(unittest.TestCase):

    def wrap_getset(self, cache, response):
        def getter(key):
            response.append(cache.get(key))
        def setter(key, value):
            cache.set(key, value)
        return (getter, setter)

    def test_case1(self):
        cache = lru.LRUCache(1)
        response = []

        getter, setter = self.wrap_getset(cache, response)
        setter(2, 1)
        getter(2)
        setter(3, 2)
        getter(2)
        getter(3)

        self.assertEqual([1, -1, 2], response)

    def test_case2(self):
        cache = lru.LRUCache(3)
        response = []

        getter, setter = self.wrap_getset(cache, response)
        setter(2, 1)
        setter(3, 2)
        setter(4, 3)
        setter(5, 4)
        getter(2)
        getter(3)
        getter(4)
        getter(5)
        self.assertEqual([-1, 2, 3, 4], response)

    def test_case3(self):
        cache = lru.LRUCache(3)
        response = []

        getter, setter = self.wrap_getset(cache, response)
        setter(2, 1)
        setter(3, 2)
        setter(4, 3)
        setter(2, 4)
        setter(3, 5)
        setter(4, 6)
        getter(2)
        getter(3)
        getter(4)
        getter(5)
        self.assertEqual([4, 5, 6, -1], response)

    def test_case4(self):
        cache = lru.LRUCache(3)
        response = []

        getter, setter = self.wrap_getset(cache, response)
        setter(2, 4)
        setter(3, 5)
        setter(4, 6)
        getter(2)
        getter(2)
        getter(2)
        getter(3)
        getter(4)
        getter(5)
        getter(3)
        getter(3)
        getter(3)
        self.assertEqual([4, 4, 4, 5, 6, -1, 5, 5, 5], response)


    def test_case101(self):
        cache = lru.LRUCache(105)
        response = []

        getter, setter = self.wrap_getset(cache, response)
        setter(33,219)
        getter(39)
        setter(96,56)
        getter(129)
        getter(115)
        getter(112)
        setter(3,280)
        getter(40)
        setter(85,193)
        setter(10,10)
        setter(100,136)
        setter(12,66)
        setter(81,261)
        setter(33,58)
        getter(3)
        setter(121,308)
        setter(129,263)
        getter(105)
        setter(104,38)
        setter(65,85)
        setter(3,141)
        setter(29,30)
        setter(80,191)
        setter(52,191)
        setter(8,300)
        getter(136)
        setter(48,261)
        setter(3,193)
        setter(133,193)
        setter(60,183)
        setter(128,148)
        setter(52,176)
        getter(48)
        setter(48,119)
        setter(10,241)
        getter(124)
        setter(130,127)
        getter(61)
        setter(124,27)
        getter(94)
        setter(29,304)
        setter(102,314)
        getter(110)
        setter(23,49)
        setter(134,12)
        setter(55,90)
        getter(14)
        getter(104)
        setter(77,165)
        setter(60,160)
        getter(117)
        setter(58,30)
        getter(54)
        getter(136)
        getter(128)
        getter(131)
        setter(48,114)
        getter(136)
        setter(46,51)
        setter(129,291)
        setter(96,207)
        getter(131)
        setter(89,153)
        setter(120,154)
        getter(111)
        getter(47)
        getter(5)
        setter(114,157)
        setter(57,82)
        setter(113,106)
        setter(74,208)
        getter(56)
        getter(59)
        getter(100)
        getter(132)
        setter(127,202)
        getter(75)
        setter(102,147)
        getter(37)
        setter(53,79)
        setter(119,220)
        getter(47)
        getter(101)
        getter(89)
        getter(20)
        getter(93)
        getter(7)
        setter(48,109)
        setter(71,146)
        getter(43)
        getter(122)
        setter(3,160)
        getter(17)
        setter(80,22)
        setter(80,272)
        getter(75)
        getter(117)
        setter(76,204)
        setter(74,141)
        setter(107,93)
        setter(34,280)
        setter(31,94)
        getter(132)
        setter(71,258)
        getter(61)
        getter(60)
        setter(69,272)
        getter(46)
        setter(42,264)
        setter(87,126)
        setter(107,236)
        setter(131,218)
        getter(79)
        setter(41,71)
        setter(94,111)
        setter(19,124)
        setter(52,70)
        getter(131)
        getter(103)
        getter(81)
        getter(126)
        setter(61,279)
        setter(37,100)
        getter(95)
        getter(54)
        setter(59,136)
        setter(101,219)
        setter(15,248)
        setter(37,91)
        setter(11,174)
        setter(99,65)
        setter(105,249)
        getter(85)
        setter(108,287)
        setter(96,4)
        getter(70)
        getter(24)
        setter(52,206)
        setter(59,306)
        setter(18,296)
        setter(79,95)
        setter(50,131)
        setter(3,161)
        setter(2,229)
        setter(39,183)
        setter(90,225)
        setter(75,23)
        setter(136,280)
        getter(119)
        setter(81,272)
        getter(106)
        getter(106)
        getter(70)
        setter(73,60)
        setter(19,250)
        setter(82,291)
        setter(117,53)
        setter(16,176)
        getter(40)
        setter(7,70)
        setter(135,212)
        getter(59)
        setter(81,201)
        setter(75,305)
        getter(101)
        setter(8,250)
        getter(38)
        setter(28,220)
        getter(21)
        setter(105,266)
        getter(105)
        getter(85)
        getter(55)
        getter(6)
        setter(78,83)
        getter(126)
        getter(102)
        getter(66)
        setter(61,42)
        setter(127,35)
        setter(117,105)
        getter(128)
        getter(102)
        getter(50)
        setter(24,133)
        setter(40,178)
        setter(78,157)
        setter(71,22)
        getter(25)
        getter(82)
        getter(129)
        setter(126,12)
        getter(45)
        getter(40)
        getter(86)
        getter(100)
        setter(30,110)
        getter(49)
        setter(47,185)
        setter(123,101)
        getter(102)
        getter(5)
        setter(40,267)
        setter(48,155)
        getter(108)
        getter(45)
        setter(14,182)
        setter(20,117)
        setter(43,124)
        getter(38)
        setter(77,158)
        getter(111)
        getter(39)
        setter(69,126)
        setter(113,199)
        setter(21,216)
        getter(11)
        setter(117,207)
        getter(30)
        setter(97,84)
        getter(109)
        setter(99,218)
        getter(109)
        setter(113,1)
        getter(62)
        setter(49,89)
        setter(53,311)
        getter(126)
        setter(32,153)
        setter(14,296)
        getter(22)
        setter(14,225)
        getter(49)
        getter(75)
        setter(61,241)
        getter(7)
        getter(6)
        getter(31)
        setter(75,15)
        getter(115)
        setter(84,181)
        setter(125,111)
        setter(105,94)
        setter(48,294)
        getter(106)
        getter(61)
        setter(53,190)
        getter(16)
        setter(12,252)
        getter(28)
        setter(111,122)
        getter(122)
        setter(10,21)
        getter(59)
        getter(72)
        getter(39)
        getter(6)
        getter(126)
        setter(131,177)
        setter(105,253)
        getter(26)
        setter(43,311)
        getter(79)
        setter(91,32)
        setter(7,141)
        getter(38)
        getter(13)
        setter(79,135)
        getter(43)
        getter(94)
        setter(80,182)
        getter(53)
        setter(120,309)
        setter(3,109)
        getter(97)
        setter(9,128)
        setter(114,121)
        getter(56)
        getter(56)
        setter(124,86)
        setter(34,145)
        getter(131)
        getter(78)
        setter(86,21)
        getter(98)
        setter(115,164)
        setter(47,225)
        getter(95)
        setter(89,55)
        setter(26,134)
        setter(8,15)
        getter(11)
        setter(84,276)
        setter(81,67)
        getter(46)
        getter(39)
        getter(92)
        getter(96)
        setter(89,51)
        setter(136,240)
        getter(45)
        getter(27)
        setter(24,209)
        setter(82,145)
        getter(10)
        setter(104,225)
        setter(120,203)
        setter(121,108)
        setter(11,47)
        getter(89)
        setter(80,66)
        getter(16)
        setter(95,101)
        getter(49)
        getter(1)
        setter(77,184)
        getter(27)
        setter(74,313)
        setter(14,118)
        getter(16)
        getter(74)
        setter(88,251)
        getter(124)
        setter(58,101)
        setter(42,81)
        getter(2)
        setter(133,101)
        getter(16)
        setter(1,254)
        setter(25,167)
        setter(53,56)
        setter(73,198)
        getter(48)
        getter(30)
        getter(95)
        setter(90,102)
        setter(92,56)
        setter(2,130)
        setter(52,11)
        getter(9)
        getter(23)
        setter(53,275)
        setter(23,258)
        getter(57)
        setter(136,183)
        setter(75,265)
        getter(85)
        setter(68,274)
        setter(15,255)
        getter(85)
        setter(33,314)
        setter(101,223)
        setter(39,248)
        setter(18,261)
        setter(37,160)
        getter(112)
        getter(65)
        setter(31,240)
        setter(40,295)
        setter(99,231)
        getter(123)
        setter(34,43)
        getter(87)
        getter(80)
        setter(47,279)
        setter(89,299)
        getter(72)
        setter(26,277)
        setter(92,13)
        setter(46,92)
        setter(67,163)
        setter(85,184)
        getter(38)
        setter(35,65)
        getter(70)
        getter(81)
        setter(40,65)
        getter(80)
        setter(80,23)
        setter(76,258)
        getter(69)
        getter(133)
        setter(123,196)
        setter(119,212)
        setter(13,150)
        setter(22,52)
        setter(20,105)
        setter(61,233)
        getter(97)
        setter(128,307)
        getter(85)
        getter(80)
        getter(73)
        getter(30)
        setter(46,44)
        getter(95)
        setter(121,211)
        setter(48,307)
        getter(2)
        setter(27,166)
        getter(50)
        setter(75,41)
        setter(101,105)
        getter(2)
        setter(110,121)
        setter(32,88)
        setter(75,84)
        setter(30,165)
        setter(41,142)
        setter(128,102)
        setter(105,90)
        setter(86,68)
        setter(13,292)
        setter(83,63)
        setter(5,239)
        getter(5)
        setter(68,204)
        getter(127)
        setter(42,137)
        getter(93)
        setter(90,258)
        setter(40,275)
        setter(7,96)
        getter(108)
        setter(104,91)
        getter(63)
        getter(31)
        setter(31,89)
        getter(74)
        getter(81)
        setter(126,148)
        getter(107)
        setter(13,28)
        setter(21,139)
        getter(114)
        getter(5)
        getter(89)
        getter(133)
        getter(20)
        setter(96,135)
        setter(86,100)
        setter(83,75)
        getter(14)
        setter(26,195)
        getter(37)
        setter(1,287)
        getter(79)
        getter(15)
        getter(6)
        setter(68,11)
        getter(52)
        setter(124,80)
        setter(123,277)
        setter(99,281)
        getter(133)
        getter(90)
        getter(45)
        getter(127)
        setter(9,68)
        setter(123,6)
        setter(124,251)
        setter(130,191)
        setter(23,174)
        setter(69,295)
        getter(32)
        getter(37)
        setter(1,64)
        setter(48,116)
        getter(68)
        setter(117,173)
        setter(16,89)
        getter(84)
        setter(28,234)
        getter(129)
        getter(89)
        getter(55)
        getter(83)
        setter(99,264)
        getter(129)
        getter(84)
        getter(14)
        setter(26,274)
        getter(109)
        getter(110)
        setter(96,120)
        setter(128,207)
        getter(12)
        setter(99,233)
        setter(20,305)
        setter(26,24)
        setter(102,32)
        getter(82)
        setter(16,30)
        setter(5,244)
        getter(130)
        setter(109,36)
        setter(134,162)
        setter(13,165)
        setter(45,235)
        setter(112,80)
        getter(6)
        setter(34,98)
        setter(64,250)
        setter(18,237)
        setter(72,21)
        setter(42,105)
        setter(57,108)
        setter(28,229)
        getter(83)
        setter(1,34)
        setter(93,151)
        setter(132,94)
        setter(18,24)
        setter(57,68)
        setter(42,137)
        getter(35)
        getter(80)
        setter(10,288)
        getter(21)
        getter(115)
        getter(131)
        getter(30)
        getter(43)
        setter(97,262)
        setter(55,146)
        setter(81,112)
        setter(2,212)
        setter(5,312)
        setter(82,107)
        setter(14,151)
        getter(77)
        setter(60,42)
        setter(90,309)
        getter(90)
        setter(131,220)
        getter(86)
        setter(106,85)
        setter(85,254)
        getter(14)
        setter(66,262)
        setter(88,243)
        getter(3)
        setter(50,301)
        setter(118,91)
        getter(25)
        getter(105)
        getter(100)
        getter(89)
        setter(111,152)
        setter(65,24)
        setter(41,264)
        getter(117)
        getter(117)
        setter(80,45)
        getter(38)
        setter(11,151)
        setter(126,203)
        setter(128,59)
        setter(6,129)
        getter(91)
        setter(118,2)
        setter(50,164)
        getter(74)
        getter(80)
        setter(48,308)
        setter(109,82)
        setter(3,48)
        setter(123,10)
        setter(59,249)
        setter(128,64)
        setter(41,287)
        setter(52,278)
        setter(98,151)
        getter(12)
        getter(25)
        setter(18,254)
        setter(24,40)
        getter(119)
        setter(66,44)
        setter(61,19)
        setter(80,132)
        setter(62,111)
        getter(80)
        setter(57,188)
        getter(132)
        getter(42)
        setter(18,314)
        getter(48)
        setter(86,138)
        getter(8)
        setter(27,88)
        setter(96,178)
        setter(17,104)
        setter(112,86)
        getter(25)
        setter(129,119)
        setter(93,44)
        getter(115)
        setter(33,36)
        setter(85,190)
        getter(10)
        setter(52,182)
        setter(76,182)
        getter(109)
        getter(118)
        setter(82,301)
        setter(26,158)
        getter(71)
        setter(108,309)
        setter(58,132)
        setter(13,299)
        setter(117,183)
        getter(115)
        getter(89)
        getter(42)
        setter(11,285)
        setter(30,144)
        getter(69)
        setter(31,53)
        getter(21)
        setter(96,162)
        setter(4,227)
        setter(77,120)
        setter(128,136)
        getter(92)
        setter(119,208)
        setter(87,61)
        setter(9,40)
        setter(48,273)
        getter(95)
        getter(35)
        setter(62,267)
        setter(88,161)
        getter(59)
        getter(85)
        setter(131,53)
        setter(114,98)
        setter(90,257)
        setter(108,46)
        getter(54)
        setter(128,223)
        setter(114,168)
        setter(89,203)
        getter(100)
        getter(116)
        getter(14)
        setter(61,104)
        setter(44,161)
        setter(60,132)
        setter(21,310)
        getter(89)
        setter(109,237)
        getter(105)
        getter(32)
        setter(78,101)
        setter(14,71)
        setter(100,47)
        setter(102,33)
        setter(44,29)
        getter(85)
        getter(37)
        setter(68,175)
        setter(116,182)
        setter(42,47)
        getter(9)
        setter(64,37)
        setter(23,32)
        setter(11,124)
        setter(130,189)
        getter(65)
        setter(33,219)
        setter(79,253)
        getter(80)
        getter(16)
        setter(38,18)
        setter(35,67)
        getter(107)
        getter(88)
        setter(37,13)
        setter(71,188)
        getter(35)
        setter(58,268)
        setter(18,260)
        setter(73,23)
        setter(28,102)
        getter(129)
        getter(88)
        getter(65)
        getter(80)
        setter(119,146)
        getter(113)
        getter(62)
        setter(123,138)
        setter(18,1)
        setter(26,208)
        getter(107)
        getter(107)
        setter(76,132)
        setter(121,191)
        getter(4)
        getter(8)
        getter(117)
        setter(11,118)
        getter(43)
        getter(69)
        getter(136)
        setter(66,298)
        getter(25)
        getter(71)
        getter(100)
        setter(26,141)
        setter(53,256)
        setter(111,205)
        setter(126,106)
        getter(43)
        setter(14,39)
        setter(44,41)
        setter(23,230)
        getter(131)
        getter(53)
        setter(104,268)
        getter(30)
        setter(108,48)
        setter(72,45)
        getter(58)
        getter(46)
        setter(128,301)
        getter(71)
        getter(99)
        getter(113)
        getter(121)
        setter(130,122)
        setter(102,5)
        setter(111,51)
        setter(85,229)
        setter(86,157)
        setter(82,283)
        setter(88,52)
        setter(136,105)
        getter(40)
        getter(63)
        setter(114,244)
        setter(29,82)
        setter(83,278)
        getter(131)
        setter(56,33)
        getter(123)
        getter(11)
        getter(119)
        setter(119,1)
        setter(48,52)
        getter(47)
        setter(127,136)
        setter(78,38)
        setter(117,64)
        setter(130,134)
        setter(93,69)
        setter(70,98)
        getter(68)
        setter(4,3)
        setter(92,173)
        setter(114,65)
        setter(7,309)
        getter(31)
        setter(107,271)
        setter(110,69)
        getter(45)
        setter(35,288)
        getter(20)
        setter(38,79)
        getter(46)
        setter(6,123)
        getter(19)
        setter(84,95)
        getter(76)
        setter(71,31)
        setter(72,171)
        setter(35,123)
        getter(32)
        setter(73,85)
        getter(94)
        getter(128)
        getter(28)
        getter(38)
        getter(109)
        setter(85,197)
        setter(10,41)
        setter(71,50)
        getter(128)
        setter(3,55)
        setter(15,9)
        setter(127,215)
        getter(17)
        getter(37)
        setter(111,272)
        setter(79,169)
        setter(86,206)
        setter(40,264)
        getter(134)
        setter(16,207)
        setter(27,127)
        setter(29,48)
        setter(32,122)
        setter(15,35)
        setter(117,36)
        getter(127)
        getter(36)
        setter(72,70)
        setter(49,201)
        setter(89,215)
        setter(134,290)
        setter(77,64)
        setter(26,101)
        getter(99)
        setter(36,96)
        setter(84,129)
        setter(125,264)
        getter(43)
        getter(38)
        setter(24,76)
        setter(45,2)
        setter(32,24)
        setter(84,235)
        setter(16,240)
        setter(17,289)
        setter(49,94)
        setter(90,54)
        setter(88,199)
        getter(23)
        setter(87,19)
        setter(11,19)
        getter(24)
        getter(57)
        getter(4)
        getter(40)
        setter(133,286)
        setter(127,231)
        getter(51)
        setter(52,196)
        getter(27)
        getter(10)
        getter(93)
        setter(115,143)
        setter(62,64)
        setter(59,200)
        setter(75,85)
        setter(7,93)
        setter(117,270)
        setter(116,6)
        getter(32)
        getter(135)
        setter(2,140)
        setter(23,1)
        setter(11,69)
        setter(89,30)
        setter(27,14)
        getter(100)
        getter(61)
        setter(99,41)
        setter(88,12)
        getter(41)
        setter(52,203)
        getter(65)
        setter(62,78)
        setter(104,276)
        setter(105,307)
        getter(7)
        setter(23,123)
        getter(22)
        setter(35,299)
        getter(69)
        getter(11)
        setter(14,112)
        getter(115)
        getter(112)
        getter(108)
        setter(110,165)
        setter(83,165)
        setter(36,260)
        setter(54,73)
        getter(36)
        setter(93,69)
        getter(134)
        setter(125,96)
        setter(74,127)
        setter(110,305)
        setter(92,309)
        setter(87,45)
        setter(31,266)
        getter(10)
        setter(114,206)
        setter(49,141)
        getter(82)
        setter(92,3)
        setter(91,160)
        getter(41)
        setter(60,147)
        setter(36,239)
        setter(23,296)
        setter(134,120)
        getter(6)
        setter(5,283)
        setter(117,68)
        getter(35)
        getter(120)
        setter(44,191)
        setter(121,14)
        setter(118,113)
        setter(84,106)
        getter(23)
        setter(15,240)
        getter(37)
        setter(52,256)
        setter(119,116)
        setter(101,7)
        setter(14,157)
        setter(29,225)
        setter(4,247)
        setter(8,112)
        setter(8,189)
        setter(96,220)
        getter(104)
        setter(72,106)
        setter(23,170)
        setter(67,209)
        setter(70,39)
        getter(18)
        getter(6)
        getter(34)
        setter(121,157)
        getter(16)
        getter(19)
        setter(83,283)
        setter(13,22)
        setter(33,143)
        setter(88,133)
        getter(88)
        setter(5,49)
        getter(38)
        getter(110)
        getter(67)
        setter(23,227)
        getter(68)
        getter(3)
        setter(27,265)
        getter(31)
        setter(13,103)
        getter(116)
        setter(111,282)
        setter(43,71)
        getter(134)
        setter(70,141)
        getter(14)
        getter(119)
        getter(43)
        getter(122)
        setter(38,187)
        setter(8,9)
        getter(63)
        setter(42,140)
        getter(83)
        getter(92)
        getter(106)
        getter(28)
        setter(57,139)
        setter(36,257)
        setter(30,204)
        getter(72)
        setter(105,243)
        getter(16)
        setter(74,25)
        getter(22)
        setter(118,144)
        getter(133)
        getter(71)
        setter(99,21)
        getter(26)
        getter(35)
        setter(89,209)
        setter(106,158)
        setter(76,63)
        setter(112,216)
        getter(128)
        getter(54)
        setter(16,165)
        setter(76,206)
        setter(69,253)
        getter(23)
        setter(54,111)
        getter(80)
        setter(111,72)
        setter(95,217)
        getter(118)
        setter(4,146)
        getter(47)
        setter(108,290)
        getter(43)
        setter(70,8)
        getter(117)
        getter(121)
        setter(42,220)
        getter(48)
        getter(32)
        setter(68,213)
        setter(30,157)
        setter(62,68)
        getter(58)
        setter(125,283)
        setter(132,45)
        getter(85)
        getter(92)
        setter(23,257)
        getter(74)
        setter(18,256)
        getter(90)
        setter(10,158)
        setter(57,34)
        getter(27)
        getter(107)

        expects = [-1,-1,-1,-1,-1,280,-1,-1,261,-1,-1,-1,-1,-1,38,-1,-1,-1,148,-1,-1,-1,-1,-1,-1,-1,-1,136,-1,-1,-1,-1,-1,153,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,160,51,-1,218,-1,261,-1,-1,-1,193,-1,-1,220,-1,-1,-1,-1,306,219,-1,-1,266,193,90,-1,-1,147,-1,148,147,131,-1,291,291,-1,178,-1,136,-1,147,-1,287,-1,-1,-1,183,174,110,-1,-1,-1,12,-1,89,305,70,-1,94,-1,-1,241,176,220,-1,306,-1,183,-1,12,-1,95,-1,-1,311,111,190,84,-1,-1,177,157,-1,-1,174,51,183,-1,4,-1,-1,21,51,176,89,-1,-1,176,313,86,229,176,294,110,101,128,49,82,193,193,-1,85,101,126,66,-1,-1,-1,67,66,126,101,84,184,23,198,110,101,130,131,130,239,35,-1,287,-1,240,313,67,-1,121,239,299,101,105,118,160,135,255,-1,11,101,258,-1,35,88,160,11,276,291,299,90,75,291,276,118,-1,121,252,145,191,-1,75,65,23,139,164,177,165,311,184,309,100,151,-1,167,90,-1,299,173,173,-1,-1,313,45,252,167,212,132,94,137,308,-1,167,164,288,82,2,-1,164,299,137,295,139,-1,101,65,249,190,-1,-1,-1,151,203,90,88,190,160,40,24,132,30,-1,161,67,119,161,24,132,-1,267,-1,-1,227,-1,183,311,295,-1,167,188,47,311,53,256,144,268,-1,188,233,-1,191,-1,-1,53,138,118,146,-1,175,53,-1,-1,-1,-1,132,88,-1,301,102,79,237,301,104,13,-1,215,-1,233,311,79,230,76,188,3,264,-1,127,41,69,24,-1,47,104,-1,24,93,-1,295,69,143,86,48,260,290,41,283,-1,123,299,-1,296,13,276,1,123,-1,240,-1,133,79,305,209,175,55,266,6,120,157,116,71,-1,-1,283,3,-1,102,106,240,-1,286,50,101,299,301,73,227,-1,144,-1,71,68,157,52,24,268,197,3,25,54,265,271]

        self.assertEqual(expects, response)

if __name__ == '__main__':
    unittest.main()


